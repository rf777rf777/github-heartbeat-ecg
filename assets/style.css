body {
  background: black;
  margin: 0;
  font-family: monospace;
  color: white;
  text-align: center;
}

#wrapper {
  width: 100%;
  height: 80vh;
  /* canvas takes 80% viewport height */
  display: flex;
  justify-content: center;
  align-items: center;
}

canvas {
  width: 95%;
  height: 100%;
  display: block;
}

/* === Toolbar 基本 === */
.toolbar {
  display: flex;
  gap: 8px;
  margin: 8px 10px;
  white-space: nowrap;
  /* 不換行 */
}

.toolbar-segment {
  flex: 1 1 33%;
  /* 三顆各佔 33% */
}

/* === 按鈕外觀（黑底綠字） === */
.dropbtn {
  width: 100%;
  background-color: #000;
  color: #00ff00;
  padding: 10px 16px;
  font-size: 14px;
  border: 1px solid #00ff00;
  cursor: pointer;
  font-family: monospace;
}

.dropbtn:hover {
  background-color: rgba(0, 255, 0, 0.2);
  color: #fff;
}

/* 如果你還是想在視覺上和按鈕有 6px 間距，改用 padding 來「橋接」，
   padding 屬於 .dropdown 的 hover 區，不會產生縫隙 */
.dropdown {
  position: relative;
  display: inline-block;
  padding-bottom: 6px;
  /* ← 這個空間仍算在 hover 範圍內，不會收起 */
}



/* 讓內容緊貼按鈕，不留縫隙 */
.dropdown-content {
  display: none;
  position: absolute;
  top: 100%;
  /* ← 取代原本的 calc(100% + 6px) 或 margin-top */
  left: 0;
  min-width: 100%;
  background-color: #000;
  border: 1px solid #00ff00;
  box-shadow: 0 8px 16px rgba(0, 255, 0, 0.3);
  z-index: 1000;
}

/* 兩種情況都保持打開：
   1) 滑鼠在 dropdown 上（含內容區）
   2) 內容區內有焦點（例如輸入框） */
.dropdown:hover .dropdown-content,
.dropdown:focus-within .dropdown-content {
  display: block;
}


.dropdown:hover .dropdown-content {
  display: block;
}

/* 使用者清單 */
#userList .user-item {
  color: #00ff00;
  padding: 8px 12px;
  border-bottom: 1px solid rgba(0, 255, 0, 0.3);
}

#userList .user-item:last-child {
  border-bottom: none;
}

/*
#userList .user-item:hover {
  background-color: rgba(0, 255, 0, 0.2);
  color: #fff;
}
*/

/* 底部 +Add 與輸入框：2:3 */
.add-row,
.username-row {
  display: grid;
  grid-template-columns: 1fr 4fr;
  /* 2:3 */
  gap: 8px;
  padding: 8px;
  border-top: 1px solid rgba(0, 255, 0, 0.35);
}

.add-btn,
.remove-btn {
  background: #000;
  color: #00ff00;
  border: 1px solid #00ff00;
  padding: 8px 10px;
  cursor: pointer;
  font-family: monospace;
  font-size: 13px;
}

.add-btn:hover,
.remove-btn:hover {
  background: rgba(0, 255, 0, 0.2);
  color: #fff;
}

.add-input {
  background: #000;
  color: #00ff00;
  border: 1px solid #00ff00;
  padding: 8px 10px;
  font-family: monospace;
  font-size: 13px;
}

.add-input::placeholder {
  color: rgba(0, 255, 0, 0.6);
}

/* === Pixel Icons（純 CSS） === */
.icon {
  display: inline-block;
  width: 12px;
  height: 12px;
  image-rendering: pixelated;
  margin-right: 5px;
}

/* Add (+) */
.icon.add {
  background:
    linear-gradient(#0f0 0 0) center/2px 100% no-repeat,
    linear-gradient(#0f0 0 0) center/100% 2px no-repeat;
}

.icon.play {
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 10px solid #0f0;
  /* 三角形底色（向右） */
  border-top: 6px solid transparent;
  /* 上方留白 */
  border-bottom: 6px solid transparent;
  /* 下方留白 */
}

/* GIF 匣/磁碟樣 */
.icon.gif {
  box-sizing: border-box;
  border: 2px solid #0f0;
  border-radius: 2px;
  position: relative;
}

.icon.gif::after {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 4px;
  height: 4px;
  background: #0f0;
}

/* 使用者 Icon：圓形頭 +（留一小段空隙）+ 長方形身體 */
.icon.user {
  position: relative;
  display: inline-block;
  width: 10px;
  /* 整體寬度，可調 */
  height: 10px;
  /* 整體高度，可調 */
  box-sizing: border-box;
}

/* 頭（圓形） */
.icon.user::before {
  content: "";
  position: absolute;
  left: 50%;
  top: -3px;
  width: 3px;
  /* 頭直徑 */
  height: 3px;
  transform: translateX(-50%);
  border: 2px solid #00ff00;
  border-radius: 50%;
  background: transparent;
  /* 想要實心可改為 #00ff00 或半透明 */
}

/* 身體（長方形，與頭之間保留小間距＝「脖子」） */
.icon.user::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 5px;
  /* 調這個值可改「頭–身」的空隙大小（目前約 2px） */
  transform: translateX(-50%);
  width: 3px;
  /* 身體寬度 */
  height: 6px;
  /* 身體高度（可拉長） */
  border: 2px solid #00ff00;
  border-radius: 2px;
  /* 身體圓角，想要更方就改 0 */
  background: transparent;
  /* 想要實心可改為 #00ff00 或半透明 */
}

.typing-text {
  font-size: 15px;
  color: #00ff00;
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  border-right: 2px solid #00ff00;
  width: 0;
  animation: typing 5s steps(60, end) infinite alternate,
    blink 0.75s step-end infinite;
  max-width: fit-content;
}

@keyframes typing {
  from {
    width: 0
  }

  to {
    width: 100%
  }
}

@keyframes blink {
  50% {
    border-color: transparent
  }
}

.title {
  color: #00ff00;
  margin-bottom: 0;
  font-weight: normal;
}

.pixel-heart32 {
  display: inline-block;
  vertical-align: middle;
  --size: 32px;
  /* 整體大小 */
  --cols: 7;
  /* 寬 7 格 */
  --rows: 6;
  /* 高 6 格 */
  --color: #00ff00;

  position: relative;
  width: var(--size);
  height: var(--size);
}

.pixel-heart32 span {
  position: absolute;
  background: var(--color);
  border-radius: 2px;
  box-shadow: 0 0 3px var(--color);

  /* 每個小格的大小（自動算） */
  width: calc(var(--size) / var(--cols));
  height: calc(var(--size) / var(--rows));

  /* 用 CSS 變數控制位置 */
  left: calc(var(--x) * (var(--size) / var(--cols)));
  top: calc(var(--y) * (var(--size) / var(--rows)));
}

/* ===== Modal / Message Box ===== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,255,0,0.04);     /* 綠色調的燈箱 */
  backdrop-filter: blur(2px);          /* 有支援時會微模糊背景 */
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: overlay-fade 120ms ease-out;
}
.modal-overlay.show { display: flex; }

@keyframes overlay-fade { from { opacity: 0 } to { opacity: 1 } }

.modal {
  width: min(520px, 92vw);
  background: #000;
  color: #00ff00;
  border: 1px solid #00ff00;
  border-radius: 10px;
  box-shadow: 0 0 24px rgba(0,255,0,0.25), inset 0 0 12px rgba(0,40,0,0.6);
  font-family: monospace;
  transform: scale(0.98);
  animation: modal-pop 140ms cubic-bezier(.2,.9,.2,1.05) forwards;
}
@keyframes modal-pop { to { transform: scale(1) } }

.modal-header, .modal-footer {
  display: flex;
  align-items: center;
  padding: 10px 14px;
  border-bottom: 1px solid rgba(0,255,0,0.25);
}
.modal-footer { border-top: 1px solid rgba(0,255,0,0.25); border-bottom: none; justify-content: flex-end; }

.modal-title {
  font-size: 16px;
  letter-spacing: 0.5px;
}

.modal-close {
  margin-left: auto;
  background: transparent;
  color: #00ff00;
  border: 1px solid transparent;
  font-size: 18px;
  line-height: 1;
  width: 28px; height: 28px;
  border-radius: 6px;
  cursor: pointer;
}
.modal-close:hover { border-color: #00ff00; background: rgba(0,255,0,0.12); color: #fff; }

.modal-body { padding: 14px; }
.modal-body p { color: #00ff00; font-size: 16px; }

.btn-ok {
  background: #000;
  width: 100%;
  color: #00ff00;
  border: 1px solid #00ff00;
  padding: 8px 10px;
  cursor: pointer;
  font-family: monospace;
  font-size: 16px;
}

.btn-ok:hover { background: rgba(0,255,0,0.18); color: #fff; }

/* 小螢幕微調 */
@media (max-width: 480px) {
  .modal { width: 92vw; }
}
